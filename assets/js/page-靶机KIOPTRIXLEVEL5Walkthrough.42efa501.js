(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{796:function(s,a,e){"use strict";e.r(a);var n=e(1),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("p",[s._v("扫描IP")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172506729.png",alt:"image-20220421172506729"}})]),s._v(" "),e("p",[s._v("nmap扫描")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("└─# nmap -T5 -A -v -p- 192.168.197.132\nStarting Nmap 7.92 ( https://nmap.org ) at 2022-03-23 06:50 EDT\nNSE: Loaded 155 scripts for scanning.\nNSE: Script Pre-scanning.\nInitiating NSE at 06:50\nCompleted NSE at 06:50, 0.00s elapsed\nInitiating NSE at 06:50\nCompleted NSE at 06:50, 0.00s elapsed\nInitiating NSE at 06:50\nCompleted NSE at 06:50, 0.00s elapsed\nInitiating ARP Ping Scan at 06:50\nScanning 192.168.197.132 [1 port]\nCompleted ARP Ping Scan at 06:50, 0.05s elapsed (1 total hosts)\nInitiating Parallel DNS resolution of 1 host. at 06:50\nCompleted Parallel DNS resolution of 1 host. at 06:50, 13.01s elapsed\nInitiating SYN Stealth Scan at 06:50\nScanning 192.168.197.132 [65535 ports]\nDiscovered open port 8080/tcp on 192.168.197.132\nDiscovered open port 80/tcp on 192.168.197.132\nSYN Stealth Scan Timing: About 46.72% done; ETC: 06:51 (0:00:35 remaining)\nCompleted SYN Stealth Scan at 06:51, 53.64s elapsed (65535 total ports)\nInitiating Service scan at 06:51\nScanning 2 services on 192.168.197.132\nCompleted Service scan at 06:51, 6.01s elapsed (2 services on 1 host)\nInitiating OS detection (try #1) against 192.168.197.132\nNSE: Script scanning 192.168.197.132.\nInitiating NSE at 06:51\nCompleted NSE at 06:52, 14.53s elapsed\nInitiating NSE at 06:52\nCompleted NSE at 06:52, 1.00s elapsed\nInitiating NSE at 06:52\nCompleted NSE at 06:52, 0.00s elapsed\nNmap scan report for 192.168.197.132\nHost is up (0.00036s latency).\nNot shown: 65532 filtered tcp ports (no-response)\nPORT     STATE  SERVICE VERSION\n22/tcp   closed ssh\n80/tcp   open   http    Apache httpd 2.2.21 ((FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8)\n| http-methods: \n|_  Supported Methods: HEAD\n8080/tcp open   http    Apache httpd 2.2.21 ((FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8)\n|_http-server-header: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8\nMAC Address: 00:0C:29:61:02:8E (VMware)\nToo many fingerprints match this host to give specific OS details\nNetwork Distance: 1 hop\n\nTRACEROUTE\nHOP RTT     ADDRESS\n1   0.36 ms 192.168.197.132\n\nNSE: Script Post-scanning.\nInitiating NSE at 06:52\nCompleted NSE at 06:52, 0.00s elapsed\nInitiating NSE at 06:52\nCompleted NSE at 06:52, 0.00s elapsed\nInitiating NSE at 06:52\nCompleted NSE at 06:52, 0.00s elapsed\nRead data files from: /usr/bin/../share/nmap\nOS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .\nNmap done: 1 IP address (1 host up) scanned in 91.00 seconds\n           Raw packets sent: 131166 (5.774MB) | Rcvd: 51 (2.136KB)\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br"),e("span",{staticClass:"line-number"},[s._v("28")]),e("br"),e("span",{staticClass:"line-number"},[s._v("29")]),e("br"),e("span",{staticClass:"line-number"},[s._v("30")]),e("br"),e("span",{staticClass:"line-number"},[s._v("31")]),e("br"),e("span",{staticClass:"line-number"},[s._v("32")]),e("br"),e("span",{staticClass:"line-number"},[s._v("33")]),e("br"),e("span",{staticClass:"line-number"},[s._v("34")]),e("br"),e("span",{staticClass:"line-number"},[s._v("35")]),e("br"),e("span",{staticClass:"line-number"},[s._v("36")]),e("br"),e("span",{staticClass:"line-number"},[s._v("37")]),e("br"),e("span",{staticClass:"line-number"},[s._v("38")]),e("br"),e("span",{staticClass:"line-number"},[s._v("39")]),e("br"),e("span",{staticClass:"line-number"},[s._v("40")]),e("br"),e("span",{staticClass:"line-number"},[s._v("41")]),e("br"),e("span",{staticClass:"line-number"},[s._v("42")]),e("br"),e("span",{staticClass:"line-number"},[s._v("43")]),e("br"),e("span",{staticClass:"line-number"},[s._v("44")]),e("br"),e("span",{staticClass:"line-number"},[s._v("45")]),e("br"),e("span",{staticClass:"line-number"},[s._v("46")]),e("br"),e("span",{staticClass:"line-number"},[s._v("47")]),e("br"),e("span",{staticClass:"line-number"},[s._v("48")]),e("br"),e("span",{staticClass:"line-number"},[s._v("49")]),e("br"),e("span",{staticClass:"line-number"},[s._v("50")]),e("br"),e("span",{staticClass:"line-number"},[s._v("51")]),e("br"),e("span",{staticClass:"line-number"},[s._v("52")]),e("br"),e("span",{staticClass:"line-number"},[s._v("53")]),e("br"),e("span",{staticClass:"line-number"},[s._v("54")]),e("br"),e("span",{staticClass:"line-number"},[s._v("55")]),e("br"),e("span",{staticClass:"line-number"},[s._v("56")]),e("br"),e("span",{staticClass:"line-number"},[s._v("57")]),e("br"),e("span",{staticClass:"line-number"},[s._v("58")]),e("br"),e("span",{staticClass:"line-number"},[s._v("59")]),e("br"),e("span",{staticClass:"line-number"},[s._v("60")]),e("br"),e("span",{staticClass:"line-number"},[s._v("61")]),e("br"),e("span",{staticClass:"line-number"},[s._v("62")]),e("br")])]),e("p",[s._v("nikto扫描")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("└─# nikto -host 192.168.197.132       \n- Nikto v2.1.6\n---------------------------------------------------------------------------\n+ Target IP:          192.168.197.132\n+ Target Hostname:    192.168.197.132\n+ Target Port:        80\n+ Start Time:         2022-03-23 06:52:45 (GMT-4)\n---------------------------------------------------------------------------\n+ Server: Apache/2.2.21 (FreeBSD) mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8\n+ Server may leak inodes via ETags, header found with file /, inode: 67014, size: 152, mtime: Sat Mar 29 13:22:52 2014\n+ The anti-clickjacking X-Frame-Options header is not present.\n+ The X-XSS-Protection header is not defined. This header can hint to the user agent to protect against some forms of XSS\n+ The X-Content-Type-Options header is not set. This could allow the user agent to render the content of the site in a different fashion to the MIME type\n+ mod_ssl/2.2.21 appears to be outdated (current is at least 2.8.31) (may depend on server version)\n+ PHP/5.3.8 appears to be outdated (current is at least 7.2.12). PHP 5.6.33, 7.0.27, 7.1.13, 7.2.1 may also current release for each branch.\n+ Apache/2.2.21 appears to be outdated (current is at least Apache/2.4.37). Apache 2.2.34 is the EOL for the 2.x branch.\n+ OpenSSL/0.9.8q appears to be outdated (current is at least 1.1.1). OpenSSL 1.0.0o and 0.9.8zc are also current.\n+ Allowed HTTP Methods: GET, HEAD, POST, OPTIONS, TRACE \n+ OSVDB-877: HTTP TRACE method is active, suggesting the host is vulnerable to XST\n+ mod_ssl/2.2.21 OpenSSL/0.9.8q DAV/2 PHP/5.3.8 - mod_ssl 2.8.7 and lower are vulnerable to a remote buffer overflow which may allow a remote shell. http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2002-0082, OSVDB-756.\n\n+ 8724 requests: 0 error(s) and 11 item(s) reported on remote host\n+ End Time:           2022-03-23 06:54:08 (GMT-4) (83 seconds)\n---------------------------------------------------------------------------\n+ 1 host(s) tested\n\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br")])]),e("p",[s._v("发现mod_ssl存在问题")]),s._v(" "),e("p",[s._v("搜索exp")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172516377.png",alt:"image-20220421172516377"}})]),s._v(" "),e("p",[s._v("编译764.c，发现错误")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172522539.png",alt:"image-20220421172522539"}})]),s._v(" "),e("p",[s._v("安装 libssl1.0-dev, 头文件添加")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("#include <openssl/rc4.h>\n#include <openssl/md5.h>\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("编译通过,运行失败，mod_ssl漏洞不能利用，尝试其他办法")]),s._v(" "),e("p",[s._v("访问web，查看页面代码，发现一个注释隐藏页面，访问")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172531510.png",alt:"image-20220421172531510"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172539432.png",alt:"image-20220421172539432"}})]),s._v(" "),e("p",[s._v("从url中可以看出使用了pchart，搜索exp")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172545636.png",alt:"image-20220421172545636"}})]),s._v(" "),e("p",[s._v("存在目录遍历漏洞，访问http://192.168.197.132/pChart2.1.3/examples/index.php?Action=View&Script=/../../etc/passwd，确实存在漏洞")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172549864.png",alt:"image-20220421172549864"}})]),s._v(" "),e("p",[s._v("查看配置文件 /usr/local/etc/apache22/httpd.conf")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172554391.png",alt:"image-20220421172554391"}})]),s._v(" "),e("p",[s._v("有一段访问限制")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('curl -H "User-Agent:Mozilla/4.0" http://192.168.1.68:8080\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172559974.png",alt:"image-20220421172559974"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172603600.png",alt:"image-20220421172603600"}})]),s._v(" "),e("p",[s._v("这里使用了phptax，"),e("em",[s._v("PhpTax")]),s._v("是美国收入所得税计算软件。搜索exp")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172608440.png",alt:"image-20220421172608440"}})]),s._v(" "),e("p",[s._v("使用msf")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172612545.png",alt:"image-20220421172612545"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172616949.png",alt:"image-20220421172616949"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172621352.png",alt:"image-20220421172621352"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172625399.png",alt:"image-20220421172625399"}})]),s._v(" "),e("p",[s._v("拿到shell，不是root权限，查看linux版本提权exp")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172629941.png",alt:"image-20220421172629941"}})]),s._v(" "),e("p",[s._v("但是目标不支持wget命令，尝试nc命令支持，利用nc上传提权代码")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172634994.png",alt:"image-20220421172634994"}})]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172642313.png",alt:"image-20220421172642313"}})]),s._v(" "),e("p",[s._v("编译，运行，提权成功")]),s._v(" "),e("p",[e("img",{attrs:{src:"/assets/img/image-20220421172646403.png",alt:"image-20220421172646403"}})])])}),[],!1,null,null,null);a.default=t.exports}}]);